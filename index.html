<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="Description" content="compileDataView">
		<title>Compile Data View</title>
		<script type="module" crossorigin src="./compileDataView.js"></script>
		<style>
textarea {
	resize: none;
	font-family: monospace;
	font-size: 16px;
	font-weight: 500,
	background-color:#fcfcfc;
}
		</style>
	</head>
<body>

<script>
const defaultDescription =
`struct Integers {
   uint16_t size;
   uint32_t source;
   int8_t id;
   int16_t origin;
   uint8_t uuid[16];
}

// char is a one character String
struct CharacterAndStrings {
   char a;
   char b[15];
}

// bit-fields stored in integer
//   of 8, 16, or 32 bits as needed
// boolean/bool is a 1-bit bitfield
struct BooleansAndBitFields {
   boolean b1;
   bool b2;
   bool b3;

   Uint foo:1;
   Uint bar:2;
   Uint grr:4;
   Uint zrr:16;
   Uint yrr:4;
}

struct FloatAndBigInts {
   float f32;
   double f64[2];
   int64_t big;
   uint64_t bigger[2];
}

struct EmbedAll {
   Integers i;
   BooleansAndBitFields b;
   CharacterAndStrings c;
   FloatAndBigInts f;
}

// anonymous unions may be included
struct UnionAll {
   uint8_t kind;
   union {
      char text[16];
      Integers i;
      BooleansAndBitFields b;
      CharacterAndStrings c;
      FloatAndBigInts f;
   }
}

// JavaScript type names may be used
struct JavaScriptTypes {
   Uint8 au;
   Uint16 bu;
   Uint32 cu;

   Int8 as;
   Int16 bs;
   Int32 cs;

   Float32 f32;
   Float64 f64;

   BigInt64 b1;
   BigUint64 b2;

   Boolean boo;
}
`;
</script>

<textarea id="viewDescription" name="viewDescription" rows="40" cols="40" spellcheck="false" autofocus="true"></textarea>
<textarea id="viewCode" name="viewCode" rows="40" cols="60" readonly="true" spellcheck="false"></textarea>

<br>See the CompileDataView <a href="https://github.com/phoddie/compileDataView/">repository</a> for <a href="https://github.com/phoddie/compileDataView/blob/master/readme.md">documentation</a> and <a href="https://github.com/phoddie/compileDataView/blob/master/compileDataView.js">source code</a>.

<script type="module" crossorigin>
const viewDescription = document.getElementById('viewDescription');
viewDescription.textContent = defaultDescription;

const viewCode = document.getElementById('viewCode');
const generated = compileDataView(viewDescription.value);
viewCode.textContent = generated.errors + generated.script;

viewDescription.addEventListener('input', e => {
	const generated = compileDataView(e.target.value);
	viewCode.textContent = generated.errors + generated.script;
});
</script>

</body>
<//html>
